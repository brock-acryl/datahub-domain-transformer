# Example DataHub Ingestion configuration using Database Table Domain Transformer
# This example shows how to use a database table instead of CSV for domain mapping
source:
  type: "teradata"  # or "snowflake", "postgresql", etc.
  config:
    include_table_lineage: false
    password: "your_password_here"
    include_usage_statistics: false
    host_port: "your-host.example.com:1025"
    include_queries: false
    stateful_ingestion:
      enabled: false
    database_pattern:
      allow:
        - "your_database"
      ignoreCase: true
    username: "your_username"

transformers:
  - type: "domain_transformer:DomainTransformer"
    config:
      # Use table_name instead of csv_file for database table lookup
      table_name: "domain_mapping_table"  # Table name in the source database
      database: "your_database"  # Optional: specify database name
      schema: null  # Optional: specify schema name if needed
      # csv_file: "domain_mapping.csv"  # Comment out csv_file when using table_name
      # datahub_url and datahub_token are optional - will be auto-detected from sink config
      # datahub_url: "http://localhost:8080"  # Optional: DataHub GMS URL (auto-detected if not provided)
      # datahub_token: "your_datahub_token_here"  # Optional: DataHub auth token (auto-detected if not provided)
      mapping:
        database: "DatabaseName"  # Table column name for database
        schema: null  # Table column name for schema (null if not used)
        table: "TableName"  # Table column name for table
        domain: "DomainID"  # Table column name for domain ID
        parent_domain: null  # Table column name for parent domain (optional)
        domain_description: null  # Table column name for domain description (optional)
      static:
        platform: "teradata"  # Platform name (must match source type)
        domain_parent: "parent_domain_id"  # Optional: default parent domain for all domains
      semantics: "PATCH"  # PATCH = add to existing domains, REPLACE = replace all domains
